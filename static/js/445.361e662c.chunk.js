"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[445],{8651:(e,t,n)=>{n.d(t,{A:()=>d});var s=n(5173),o=n.n(s),i=n(5043),r=n(5748),c=n(6446),a=n(579);const l=(0,i.forwardRef)(((e,t)=>{let{icon:n,width:s=20,sx:o,...i}=e;return(0,a.jsx)(c.A,{ref:t,component:r.In,className:"component-iconify",icon:n,sx:{width:s,height:s,...o},...i})}));l.propTypes={icon:o().oneOfType([o().element,o().string]),sx:o().object,width:o().number};const d=l},1445:(e,t,n)=>{n.r(t),n.d(t,{default:()=>G});var s=n(5043),o=n(3003),i=n(7351),r=n(2387);var c=n(8911),a=n(1906),l=n(9252),d=n(5865),p=n(8651),h=n(2075),x=n(6446),m=n(8446),u=n(2110),g=n(3664),j=n(310),A=n(1121);function b(e,t){const n=t||"dd MMM yyyy";return e?(0,A.GP)(new Date(e),n):""}var f=n(9328),w=n.n(f);function v(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:".00";return e.includes(t)?e.replace(t,""):e}var y=n(5173),k=n.n(y),C=n(579);const S=(0,s.forwardRef)(((e,t)=>{let{src:n,sx:s,...o}=e;return(0,C.jsx)(x.A,{component:"span",className:"svg-color",ref:t,sx:{width:24,height:24,display:"inline-block",bgcolor:"currentColor",mask:"url(".concat(n,") no-repeat center / contain"),WebkitMask:"url(".concat(n,") no-repeat center / contain"),...s},...o})}));S.propTypes={src:k().string,sx:k().object};const T=S;var I=n(3474),P=n(9033);var F=n(3981),N=n(4493),D=n(8569),q=n(3851),O=n(1637);const W=e=>{let{comments:t,status:n}=e;return"loading"===n?(0,C.jsx)(O.A,{}):"failed"===n?(0,C.jsx)(d.A,{variant:"body1",children:"Failed to load comments."}):"succeeded"===n&&0===t.length?(0,C.jsx)(d.A,{variant:"body1",children:"No hay comentarios."}):(0,C.jsx)(C.Fragment,{children:t.map(((e,n)=>(0,C.jsxs)("div",{children:[(0,C.jsxs)(F.Ay,{alignItems:"flex-start",children:[(0,C.jsx)(q.A,{children:(0,C.jsx)(g.A,{alt:"Remy Sharp",src:e.owner.picture})}),(0,C.jsx)(D.A,{primary:e.owner.firstName,secondary:(0,C.jsx)(s.Fragment,{children:(0,C.jsx)(d.A,{sx:{display:"inline"},component:"span",variant:"body2",color:"text.primary",children:e.message})})}),(0,C.jsx)(d.A,{sx:{display:"inline"},component:"span",variant:"body2",color:"text.primary",children:b(e.publishDate)})]}),n+1<t.length&&(0,C.jsx)(N.A,{variant:"inset",component:"li"})]},n)))})};var M=n(5721);const R={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",border:"0.5px solid #000",boxShadow:24,p:4},z=e=>{let{isOpen:t,onClose:n,postId:i}=e;const{comments:r,status:c}=((e,t)=>{const n=(0,o.wA)(),i=(0,o.d4)((t=>(0,P.X7)(t,e))),r=(0,o.d4)((t=>(0,P.tV)(t,e))),[c,a]=(0,s.useState)(!1);return(0,s.useEffect)((()=>{t&&!c&&(n((0,P.dr)(e)),a(!0))}),[n,t,e,c]),{comments:i,status:r}})(i,t);return(0,C.jsx)(I.A,{open:t,onClose:n,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,C.jsx)(M.A,{sx:R,children:(0,C.jsx)(W,{comments:r,status:c})})})};function E(e){let{post:t}=e;const{id:n,owner:o,image:i,text:r,publishDate:a,likes:l}=t,[A,f]=(0,s.useState)(!1),y=()=>{f(!A)},k=(0,C.jsx)(g.A,{alt:o.firstName,src:o.picture,sx:{position:"absolute",bottom:e=>e.spacing(-2),zIndex:9,top:24,left:24,width:40,height:40}}),S=(0,C.jsx)(x.A,{component:"img",alt:r,src:i,sx:{top:0,width:1,height:1,objectFit:"cover",position:"absolute"}}),I=(0,C.jsx)(m.A,{color:"inherit",variant:"subtitle2",underline:"hover",sx:{overflow:"hidden",WebkitLineClamp:2,display:"-webkit-box",WebkitBoxOrient:"vertical",typography:"h5",height:60,color:"common.white"},children:r}),P=(0,C.jsxs)(c.A,{direction:"row",justifyContent:"space-between",flexWrap:"wrap",spacing:1.5,sx:{mt:3,color:"text.disabled"},children:[(0,C.jsx)(d.A,{variant:"caption",sx:{opacity:.48,color:"common.white"},children:b(a)}),(0,C.jsxs)(c.A,{direction:"row",spacing:1.5,children:[(0,C.jsxs)(c.A,{direction:"row",onClick:y,sx:{opacity:.48,color:"common.white",cursor:"pointer"},children:[(0,C.jsx)(p.A,{width:16,icon:"eva:message-circle-fill",sx:{mr:.5}}),(0,C.jsx)(d.A,{variant:"caption",children:"comments"})]}),(0,C.jsxs)(c.A,{direction:"row",sx:{opacity:.48,color:"common.white"},children:[(0,C.jsx)(p.A,{width:16,icon:"mdi:heart",sx:{mr:.5}}),(0,C.jsx)(d.A,{variant:"caption",children:(F=l,v(F?w()(F).format("0.00a"):"",".00"))})]})]})]});var F;const N=(0,C.jsx)(d.A,{variant:"caption",component:"div",sx:{mb:2,opacity:.48,color:"common.white"},children:o.firstName}),D=(0,C.jsx)(T,{color:"paper",src:"/assets/icons/shape-avatar.svg",sx:{width:80,height:36,zIndex:9,bottom:-15,position:"absolute",color:"background.paper",display:"none"}});return(0,C.jsxs)(h.A,{item:!0,xs:12,sm:6,md:4,children:[(0,C.jsxs)(u.A,{children:[(0,C.jsxs)(x.A,{sx:{position:"relative","&:after":{top:0,content:"''",width:"100%",height:"100%",position:"absolute",bgcolor:e=>(0,j.X4)(e.palette.grey[900],.72)},pt:{xs:"calc(100% * 4 / 3)",sm:"calc(100% * 3 / 4.66)"}},children:[D,k,S,(0,C.jsx)(x.A,{onClick:y,sx:{position:"absolute",bottom:0,left:0,width:"100%",height:"100%",bgcolor:"transparent",cursor:"pointer"}})]}),(0,C.jsxs)(x.A,{sx:{p:e=>e.spacing(4,3,3,3),width:1,bottom:0,position:"absolute"},children:[N,I,P]})]}),(0,C.jsx)(z,{isOpen:A,onClose:y,postId:n})]})}const L=e=>{let{posts:t,postsStatus:n,filteredPosts:s}=e;return(0,C.jsxs)(h.A,{container:!0,spacing:3,children:["loading"===n&&(0,C.jsx)(O.A,{}),"failed"===n&&(0,C.jsx)(d.A,{variant:"h6",children:"Failed to load posts. Please try again later."}),"succeeded"===n&&0===t.length&&(0,C.jsx)(d.A,{variant:"h6",children:"No posts available."}),("succeeded"===n||"connected"===n)&&(s.length>0?s:t).map((e=>(0,C.jsx)(E,{post:e},e.id)))]})},B=e=>{let{uniqueTags:t,selectedTag:n,handleTagClick:s,handleClearFilter:o,filteredPosts:i}=e;return(0,C.jsxs)(c.A,{spacing:2,mb:3,direction:"row",flexWrap:"wrap",children:[t.map((e=>(0,C.jsx)(a.A,{variant:e===n?"contained":"outlined",color:"secondary",onClick:()=>s(e),style:{marginLeft:"0px",marginInline:"5px",marginBottom:"8px"},children:e},e))),i.length>0&&(0,C.jsx)(a.A,{variant:"contained",color:"inherit",onClick:o,children:"Limpiar"})]})},H=()=>{const{posts:e,postsStatus:t,useServer:n,selectedTag:h,uniqueTags:x,filteredPosts:m,handleTagClick:u,handleClearFilter:g,toggleDataSource:j}=(()=>{const e=(0,o.wA)(),t=(0,o.d4)(i.xz),n=(0,o.d4)(i.g_),c=(0,o.d4)(i.$0),a=(0,o.d4)(i.HT),l=(0,o.d4)(i.wq),d=(0,o.d4)(i.mH),p=(0,s.useCallback)((()=>{e((0,i.JI)(!c)),e((0,i.y9)())}),[e,c]);return(0,s.useEffect)((()=>{const t=()=>{console.log("Socket connected."),r.A.emit("getPosts")},s=()=>{console.log("Socket disconnected."),p()};return r.A.on("connect",t),r.A.on("disconnect",s),r.A.connected&&t(),e((0,i.RO)()),"idle"!==n&&"disconnected"!==n||e((0,i.y9)()),()=>{r.A.off("connect",t),r.A.off("disconnect",s),r.A.off("posts")}}),[e,n,c,p]),{posts:t,postsStatus:n,useServer:c,selectedTag:a,uniqueTags:l,filteredPosts:d,toggleDataSource:p,handleTagClick:t=>{e((0,i.Dk)(t))},handleClearFilter:()=>{e((0,i.Se)())}}})();return(0,C.jsxs)(l.A,{children:[(0,C.jsxs)(c.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mb:5,children:[(0,C.jsx)(d.A,{variant:"h4",children:"Posts"}),("loading"!==t||"connected"===t)&&(0,C.jsx)(a.A,{variant:"contained",color:"inherit",startIcon:(0,C.jsx)(p.A,{icon:"eva:plus-fill"}),onClick:j,children:n?"Switch to External API":"Switch to Server"})]}),("succeeded"===t||"connected"===t)&&e.length>0&&(0,C.jsx)(B,{uniqueTags:x,selectedTag:h,filteredPosts:m,handleTagClick:u,handleClearFilter:g}),(0,C.jsx)(L,{posts:e,postsStatus:t,filteredPosts:m})]})};var X=n(8903);const G=()=>(0,C.jsx)(C.Fragment,{children:(0,C.jsx)(X.Ay,{container:!0,direction:"column",spacing:2,children:(0,C.jsx)(X.Ay,{item:!0,children:(0,C.jsx)(H,{})})})})}}]);
//# sourceMappingURL=445.361e662c.chunk.js.map